<ng-container *transloco="let t; read: 'signup'">
  <mat-card class="form-card">
    <mat-card-header>
      <mat-card-title>
        <mat-icon [inline]="true">assignment</mat-icon>
        <span>{{ t('signupTitle') }}</span>
      </mat-card-title>
    </mat-card-header>

    <mat-card-content>
      <form
        [formGroup]="form"
        (submit)="onSubmit()"
        class="form"
        autocomplete="off"
      >
        <mat-form-field appearance="outline" [controlErrors]="errors.username">
          <mat-label>{{ t('user') }}</mat-label>
          <input matInput type="text" formControlName="username" required />
          <span matSuffix [ngSwitch]="usernameControl.status">
            <mat-spinner
              *ngSwitchCase="'PENDING'"
              [diameter]="20"
            ></mat-spinner>
            <mat-icon *ngSwitchCase="'VALID'" style="color: green">
              check_circle_outline
            </mat-icon>
            <mat-icon *ngSwitchDefault></mat-icon>
          </span>
          <mat-error autofillErrors></mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" [controlErrors]="errors.email">
          <mat-label>{{ t('mail') }}</mat-label>
          <input
            matInput
            [placeholder]="t('mail')"
            formControlName="email"
            required
          />
          <span matSuffix [ngSwitch]="emailControl.status">
            <mat-spinner
              *ngSwitchCase="'PENDING'"
              [diameter]="20"
            ></mat-spinner>
            <mat-icon *ngSwitchCase="'VALID'" style="color: green">
              check_circle_outline
            </mat-icon>
            <mat-icon *ngSwitchDefault></mat-icon>
          </span>
          <mat-error autofillErrors></mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" [controlErrors]="errors.password">
          <mat-label>{{ t('password') }}</mat-label>
          <input
            matInput
            [placeholder]="t('password')"
            formControlName="password"
            [type]="showPassword ? 'text' : 'password'"
            required
          />
          <mat-icon matSuffix (click)="showPassword = !showPassword">{{
            showPassword ? 'visibility_off' : 'visibility'
          }}</mat-icon>
          <mat-error autofillErrors></mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" [controlErrors]="errors.password2">
          <mat-label>{{ t('repeatPassword') }}</mat-label>
          <input
            matInput
            [placeholder]="t('repeatPassword')"
            formControlName="password2"
            [type]="showPassword2 ? 'text' : 'password'"
            required
          />
          <mat-icon matSuffix (click)="showPassword2 = !showPassword2">{{
            showPassword2 ? 'visibility_off' : 'visibility'
          }}</mat-icon>
          <mat-error autofillErrors></mat-error>
        </mat-form-field>

        <button class="mat-primary mat-raised-button btn--big" type="submit">
          {{ 'submit' | transloco }}
        </button>
      </form>
    </mat-card-content>

    <mat-card-footer>
      <h3>¿Ya estás registrado?</h3>
      <a [routerLink]="['/home', 'login']" routerLinkActive="router-link-active"
        >Inicia sesión</a
      >
    </mat-card-footer>
  </mat-card>
</ng-container>
